{% extends "base.html" %}
{% block content %}
  <div class="card" style="max-width:720px; margin:0 auto;">
    <div class="section-title"><strong>Panel</strong></div><br>
    <form action="/ui_recommend" method="post">
      <!-- Choose a book as seed -->
      <label class="hint">Choose a Book</label>
      <select name="seed_title">
        {% for t in seed_titles %}
          <option value="{{ t }}">{{ t }}</option>
        {% endfor %}
      </select>

      <!-- Method -->
      <div style="margin-top:14px;" class="hint">Recommendation Method</div>
      <div style="display:flex; gap:18px; margin:8px 0 12px;">
        <label><input type="radio" name="method" value="hybrid" checked> Hybrid</label>
        <label><input type="radio" name="method" value="collab"> Collaborative Filtering</label>
        <label><input type="radio" name="method" value="content"> Content-Based Filtering</label>
      </div><br>

      <!-- TopN -->
      <div class="hint">Number of Recommendations</div>
      <input type="range" min="5" max="20" value="10" name="topn" oninput="nOut.textContent=this.value">
      <div class="meta"><span id="nOut">10</span></div><br>

      <!-- Weights -->
      <div class="hint">Collaborative Weight</div>
      <input type="range" min="0" max="1" step="0.05" value="0.6" name="alpha" oninput="aOut.textContent=this.value">
      <div class="meta"><span id="aOut">0.6</span></div><br>

      <div class="hint">MMR Diversity (Î»)</div>
      <input type="range" min="0" max="1" step="0.05" value="0.7" name="lambda_div" oninput="lOut.textContent=this.value">
      <div class="meta"><span id="lOut">0.7</span></div><br>

      <!-- Optional: choose an existing user -->
      {% if user_choices %}
        <div class="hint">User (optional)</div>
        <select name="user_id">
          <option value="">Auto (no user)</option>
          {% for uid in user_choices %}
            <option value="{{ uid }}">{{ uid }}</option>
          {% endfor %}
        </select>
      {% endif %}<br><br>

      <button type="submit" style="margin-top:14px;">Get Recommendations</button>
    </form>
  </div>
{% endblock %}
